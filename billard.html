<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>üé± BILLARD √âPIQUE - MULTIJOUEUR</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<div class="app">
  <div class="header">
    <div class="brand">
      <span class="logo">üé±</span>
      <span class="brand-text" id="gameTitle">BILLARD √âPIQUE</span>
    </div>
            <div class="header-controls">
          <div class="language-buttons">
            <button class="lang-btn active" data-lang="fr" title="Fran√ßais">
              <span class="flag">üá´üá∑</span>
              <span class="lang-text">FR</span>
            </button>
            <button class="lang-btn" data-lang="nl" title="Nederlands">
              <span class="flag">üá≥üá±</span>
              <span class="lang-text">NL</span>
            </button>
    </div>
    <button id="restartBtn" class="btn secondary">NOUVELLE PARTIE</button>
        </div>
  </div>

  <!-- √âcran d'accueil -->
  <div id="startScreen" class="card">
    <!-- Mode de jeu -->
    <div class="row">
      <div class="col">
        <label id="gameModeLabel">üéÆ MODE DE JEU</label>
        <div style="display:flex;gap:15px;margin:15px 0;flex-wrap:wrap">
          <button id="localBtn" class="btn">LOCAL</button>
          <button id="aiBtn" class="btn">vs IA</button>
          <button id="hostBtn" class="btn">H√âBERGER</button>
          <button id="joinBtn" class="btn">REJOINDRE</button>
        </div>
      </div>
    </div>

    <!-- Section IA -->
    <div id="aiSection" class="multiplayer-section" style="display:none">
      <label id="aiLevelLabel">ü§ñ NIVEAU DE L'IA</label>
      <div class="stars" style="margin:15px 0">
        <input type="radio" name="aiLevel" id="ai1" value="1" checked>
        <label for="ai1">DUMB</label>
        <input type="radio" name="aiLevel" id="ai2" value="2">
        <label for="ai2">SMART</label>
        <input type="radio" name="aiLevel" id="ai3" value="3">
        <label for="ai3">TERMINATOR</label>
      </div>
      <div class="help">DUMB: Tire au hasard ‚Ä¢ SMART: Strat√©gie basique ‚Ä¢ TERMINATOR: Calculs parfaits</div>
      <button id="cancelAI" class="btn danger" style="margin-top:15px">ANNULER</button>
    </div>

    <!-- Section multijoueur -->
    <div id="multiplayerSection" class="multiplayer-section" style="display:none">
      <div class="connection-status">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">D√©connect√©</span>
      </div>
      
      <div id="hostSection" style="display:none">
        <label>üîó TON ID DE PARTIE</label>
        <div class="peer-id-display" id="myPeerId">G√©n√©ration en cours...</div>
        <button class="btn secondary" id="copyPeerBtn" style="padding:8px 16px;font-size:12px">üìã COPIER ID</button>
        <div class="help">Partage cet ID √† ton adversaire !</div>
      </div>
      
      <div id="joinSection" style="display:none">
        <label for="friendId">üéØ ID DE TON ADVERSAIRE</label>
        <input id="friendId" type="text" placeholder="Colle l'ID ici..." />
        <button id="connectBtn" class="btn" style="margin-top:10px">SE CONNECTER</button>
      </div>
      
      <button id="cancelMultiplayer" class="btn danger" style="margin-top:15px">ANNULER</button>
    </div>

    <!-- Joueurs -->
    <div class="row">
      <div class="col">
        <label for="p1" id="p1Label">ü§ñ PLAYER 1 (BLANC)</label>
        <input id="p1" type="text" placeholder="Joueur 1" />
        <div class="check">
          <input id="assistP1" type="checkbox" checked>
          <label for="assistP1" id="assistP1Label">Assistance de vis√©e</label>
        </div>
      </div>
      <div class="col">
        <label for="p2" id="p2Label">‚ö° PLAYER 2 (NOIR)</label>
        <input id="p2" type="text" placeholder="Joueur 2" />
        <div class="check">
          <input id="assistP2" type="checkbox" checked>
          <label for="assistP2" id="assistP2Label">Assistance de vis√©e</label>
        </div>
      </div>
    </div>
    
    <div class="row" style="margin-top:25px">
      <div class="col">
        <label id="difficultyLabel">üéØ DIFFICULT√â</label>
        <div class="stars">
          <input type="radio" name="difficulty" id="diff1" value="1">
          <label for="diff1">NOOB</label>
          <input type="radio" name="difficulty" id="diff2" value="2" checked>
          <label for="diff2">PRO</label>
          <input type="radio" name="difficulty" id="diff3" value="3">
          <label for="diff3">LEGEND</label>
        </div>
        <div class="help" id="difficultyHelp">NOOB: Trou g√©ant ‚Ä¢ PRO: √âquilibr√© ‚Ä¢ LEGEND: Mode hardcore</div>
      </div>
    </div>
    
    <div class="row" style="margin-top:30px;align-items:center;justify-content:space-between">
      <div class="help" id="gameInstructions" style="color:var(--neon-cyan)">
        üëÜ Touche une boule, tire en arri√®re, rel√¢che pour D√âTRUIRE !
      </div>
      <button id="startBtn" class="btn">üöÄ <span id="startBtnText">COMMENCER LE MASSACRE</span></button>
    </div>
  </div>

  <!-- Zone de jeu -->
  <div id="gameUI" style="display:none" class="game-area">
    <div class="scores-hud">
      <div class="player-score">
        <span id="name1" class="player-name">Player 1</span>
        <span id="score1" class="score-value">0</span>
      </div>
      <span class="vs">VS</span>
      <div class="player-score">
        <span id="name2" class="player-name">Player 2</span>
        <span id="score2" class="score-value">0</span>
      </div>
    </div>
    
    <div class="board-container">
      <div class="felt">
        <canvas id="game" width="912" height="532"></canvas>
        
        <!-- HUD -->
        <div class="hud">
          <div class="turn-indicator" id="turnBanner">
            <div class="turn-ball white" id="turnBall"></div>
            <div id="turnText">PR√âPARE-TOI...</div>
          </div>
        </div>
        
        <!-- Jauge de puissance -->
        <div class="power-meter" id="powerMeter">
          <div class="power-fill" id="powerFill"></div>
        </div>
        
        <!-- Stats en temps r√©el -->
        <div class="stats-panel" id="statsPanel">
          <div>SHOTS: <span id="shotCount">0</span></div>
          <div>STREAK: <span id="streak">0</span></div>
          <div>TEMPS: <span id="gameTime">00:00</span></div>
        </div>
        
        <!-- Network status + Chat -->
        <div class="network-panel" id="networkPanel">
          <div>MODE: <span id="gameMode">LOCAL</span></div>
          <div>PING: <span id="ping">-</span></div>
          <div>SYNC: <span id="syncStatus">OK</span></div>
          <button id="toggleChat" class="btn secondary" style="margin-top:10px;padding:6px 12px;font-size:11px;display:none">üí¨ CHAT</button>
        </div>
        
        <!-- Chat P2P -->
        <div class="chat-panel" id="chatPanel">
          <div class="chat-header">
            üí¨ CHAT P2P
            <button id="closeChat" class="btn secondary" style="padding:4px 8px;font-size:10px">‚úñ</button>
          </div>
          <div class="chat-messages" id="chatMessages">
            <div class="chat-welcome">Connect√© ! Commence √† chatter...</div>
          </div>
          <div class="chat-input-group">
            <input type="text" id="chatInput" placeholder="Tape ton message..." maxlength="100">
            <button id="sendChat" class="btn" style="padding:8px 12px;font-size:11px">üì§</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlays -->
  <div id="nextOverlay" class="overlay hidden">
    <div class="modal">
      <h2>üèÜ MANCHE TERMIN√âE</h2>
      <p id="roundResult">R√©sultat...</p>
      <button id="nextBtn" class="btn">MANCHE SUIVANTE</button>
    </div>
  </div>

  <div id="victoryOverlay" class="overlay hidden">
    <canvas id="confettiCanvas" class="confetti-canvas"></canvas>
    <div class="modal victory-modal">
      <div class="victory-crown-animation">üëë</div>
      <h2 id="victoryTitle" class="victory-title-epic">VICTOIRE √âPIQUE!</h2>
      <p id="victorySubtitle" class="victory-subtitle">... domine le terrain!</p>
      <div class="victory-stats-container">
        <div class="victory-stat">
          <span class="stat-icon">üé±</span>
          <span class="stat-label">Score final</span>
          <span class="stat-value" id="finalScore">2 - 0</span>
    </div>
        <div class="victory-stat">
          <span class="stat-icon">üéØ</span>
          <span class="stat-label">Tirs totaux</span>
          <span class="stat-value" id="totalShots">12</span>
        </div>
        <div class="victory-stat">
          <span class="stat-icon">‚è±Ô∏è</span>
          <span class="stat-label">Dur√©e</span>
          <span class="stat-value" id="gameDuration">03:45</span>
        </div>
      </div>
      <div class="victory-buttons">
        <button id="playAgainBtn" class="btn primary large pulse">üéÆ REVANCHE!</button>
        <button id="homeFromVictoryBtn" class="btn secondary large">üè† MENU</button>
      </div>
    </div>
  </div>
</div>

<script src="https://unpkg.com/peerjs@1.5.0/dist/peerjs.min.js"></script>
<script type="module" src="assets/js/main.js"></script>
</body>
</html>